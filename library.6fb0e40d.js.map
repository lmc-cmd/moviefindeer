{"mappings":"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","sources":["src/js/library.js","src/templates/libraryCards.hbs"],"sourcesContent":["import './lightSwitch';\r\nimport './teamLightbox';\r\nimport ls from './storage';\r\nimport Pagination from 'tui-pagination';\r\nimport { galleryApi } from './randomFilms';\r\nimport { onPosterClick } from './modal';\r\nimport createLibraryCards from '../templates/libraryCards.hbs';\r\nimport { updateDataForLocalStorage } from './localStorage';\r\nimport { changeColorBtnLibraryClick } from './colorButton';\r\n\r\nconst containerLibraryElement = document.querySelector('.library-film_list');\r\nconst buttonWatchEl = document.querySelector('button[data-watched]');\r\nconst buttonQueueEl = document.querySelector('button[data-queue]');\r\ncontainerLibraryElement.addEventListener('click', onPosterClick);\r\nconst alertInfo = document.querySelector('.library_alert');\r\nbuttonWatchEl.addEventListener('click', onButtonWatchEl);\r\nbuttonQueueEl.addEventListener('click', onButtonQueueEl);\r\n\r\nlet cardsQuantity;\r\nif (window.innerWidth < 768) cardsQuantity = 4;\r\nelse if (window.innerWidth < 1200) cardsQuantity = 8;\r\nelse cardsQuantity = 9;\r\n\r\nconst containerPagination = document.querySelector('.pagination');\r\nconst paginationLibraryWatch = new Pagination(containerPagination, {\r\n  itemsPerPage: cardsQuantity,\r\n  visiblePages: 5,\r\n  centerAlign: true,\r\n  firstItemClassName: 1,\r\n  template: {\r\n    currentPage: '<a class=\"page-btn is-selected\">{{page}}</a>',\r\n    page: '<a class=\"page-btn\">{{page}}</a>',\r\n    moveButton: `<button class=\"move-btn move-btn-{{type}}\"></button>`,\r\n    disabledMoveButton:\r\n      '<button class=\"move-btn move-btn-{{type}} disabled\" disabled></button>',\r\n    moreButton: '<a class=\"page-btn next-is-ellip last-child\">...</a>',\r\n  },\r\n});\r\n\r\nconst paginationLibraryQueue = new Pagination(containerPagination, {\r\n  itemsPerPage: cardsQuantity,\r\n  visiblePages: 5,\r\n  centerAlign: true,\r\n  firstItemClassName: 1,\r\n  template: {\r\n    currentPage: '<a class=\"page-btn is-selected\">{{page}}</a>',\r\n    page: '<a class=\"page-btn\">{{page}}</a>',\r\n    moveButton: `<button class=\"move-btn move-btn-{{type}}\"></button>`,\r\n    disabledMoveButton:\r\n      '<button class=\"move-btn move-btn-{{type}} disabled\" disabled></button>',\r\n    moreButton: '<a class=\"page-btn next-is-ellip last-child\">...</a>',\r\n  },\r\n});\r\n\r\ndocument.onload = updateDataForLocalStorage();\r\ndocument.onload = createMarkupWatchLocalStorage();\r\n\r\nfunction onButtonWatchEl(event) {\r\n  changeColorBtnLibraryClick(event, buttonQueueEl);\r\n  createMarkupWatchLocalStorage();\r\n}\r\n\r\nfunction onButtonQueueEl(event) {\r\n  changeColorBtnLibraryClick(event, buttonWatchEl);\r\n  createMarkupQueueLocalStorage();\r\n}\r\n\r\nfunction createMarkupWatchLocalStorage() {\r\n  containerLibraryElement.innerHTML = '';\r\n  alertInfo.innerHTML = '';\r\n\r\n  const arrayWatch = ls.load(`toWatch`);\r\n  const libEL = document.querySelector('.library_alert');\r\n  if (!arrayWatch || arrayWatch.length === 0) {\r\n    alertInfo.innerHTML = \"You don't have watched films in your library\";\r\n    containerPagination.remove();\r\n    return;\r\n  }\r\n\r\n  const arrayForRenderFirstPage = arrayWatch.slice(0, cardsQuantity);\r\n  renderLibraryMarkup(arrayForRenderFirstPage);\r\n\r\n  paginationLibraryWatch.reset(arrayWatch.length);\r\n}\r\n\r\nfunction createMarkupQueueLocalStorage() {\r\n  containerLibraryElement.innerHTML = '';\r\n  alertInfo.innerHTML = '';\r\n\r\n  const arrayQueue = ls.load(`queue`);\r\n\r\n  if (!arrayQueue || arrayQueue.length === 0) {\r\n    alertInfo.innerHTML = \"You don't have films in queue in your library\";\r\n    containerPagination.remove();\r\n    return;\r\n  }\r\n\r\n  const arrayForRenderFirstPage = arrayQueue.slice(0, cardsQuantity);\r\n  renderLibraryMarkup(arrayForRenderFirstPage);\r\n\r\n  paginationLibraryQueue.reset(arrayQueue.length);\r\n}\r\n\r\npaginationLibraryWatch.on('afterMove', event => {\r\n  const currentPage = event.page;\r\n  alertInfo.innerHTML = '';\r\n  const arrayWatch = ls.load(`toWatch`);\r\n  const arrayForRenderCurrentPage = arrayWatch.slice(\r\n    (currentPage - 1) * cardsQuantity,\r\n    currentPage * cardsQuantity\r\n  );\r\n  renderLibraryMarkup(arrayForRenderCurrentPage);\r\n});\r\n\r\npaginationLibraryQueue.on('afterMove', event => {\r\n  const currentPage = event.page;\r\n  alertInfo.innerHTML = '';\r\n  const arrayQueue = ls.load(`queue`);\r\n  const arrayForRenderCurrentPage = arrayQueue.slice(\r\n    (currentPage - 1) * cardsQuantity,\r\n    currentPage * cardsQuantity\r\n  );\r\n  renderLibraryMarkup(arrayForRenderCurrentPage);\r\n});\r\n\r\nfunction renderLibraryMarkup(array) {\r\n  let markup = '';\r\n  array.forEach(el => {\r\n    galleryApi\r\n      .fetchMovieById(el)\r\n      .then(data => {\r\n        data.release_date = data.release_date.split('-')[0];\r\n        markup += createLibraryCards(data);\r\n        return markup;\r\n      })\r\n      .then(data => (containerLibraryElement.innerHTML = data))\r\n      .catch(error => console.log(error));\r\n  });\r\n}\r\n","  <li class='film-card card-item' data-id={{this.id}} data-action>\r\n    <img\r\n      {{#if this.poster_path}} \r\n      src='https://image.tmdb.org/t/p/w500/{{this.poster_path}}'\r\n      {{else}} \r\n      src='https://png.pngtree.com/png-clipart/20211121/original/pngtree-not-found-stamp-label-png-image_6948403.png'\r\n      {{/if}}\r\n      alt='Poster of movie \"{{this.original_title}}\"'\r\n      loading='lazy'\r\n      class=\"film-image\"\r\n      id=\"{{this.id}}\"\r\n    />\r\n    <div class='info'>\r\n      <p class='film-tittle'>\r\n        {{this.original_title}}\r\n      </p>\r\n      <p class='film-genre'>\r\n{{#each this.genres}}{{this.name}}{{#unless @last}}, {{/unless}}{{/each}}\r\n        &#8739;\r\n        {{this.release_date}} <span class=\"film-raiting\">&nbsp;{{this.vote_average}}&nbsp;</span>\r\n      </p>\r\n    </div>\r\n  </li>\r\n"],"names":["parcelRequire","$38b3b070b11573ce$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","lambda","stack1","nullContext","name","hash","fn","program","inverse","noop","loc","start","line","column","end","compiler","main","alias1","alias2","alias3","useData","$93effc6fc56091ad$var$containerLibraryElement","document","querySelector","$93effc6fc56091ad$var$buttonWatchEl","$93effc6fc56091ad$var$buttonQueueEl","addEventListener","$5xtVg","onPosterClick","$93effc6fc56091ad$var$cardsQuantity","$93effc6fc56091ad$var$alertInfo","event","$bu0Gx","changeColorBtnLibraryClick","$93effc6fc56091ad$var$createMarkupWatchLocalStorage","innerHTML","arrayQueue","$jzQFI","default","load","length","$93effc6fc56091ad$var$containerPagination","remove","$93effc6fc56091ad$var$renderLibraryMarkup","slice","$93effc6fc56091ad$var$paginationLibraryQueue","reset","$93effc6fc56091ad$var$createMarkupQueueLocalStorage","window","innerWidth","$93effc6fc56091ad$var$paginationLibraryWatch","$1VFfL","itemsPerPage","visiblePages","centerAlign","firstItemClassName","currentPage","page","moveButton","disabledMoveButton","moreButton","arrayWatch","array","markup","forEach","el","$4QITu","galleryApi","fetchMovieById","then","release_date","split","catch","error","console","log","onload","$UL92Z","updateDataForLocalStorage","on"],"version":3,"file":"library.6fb0e40d.js.map"}